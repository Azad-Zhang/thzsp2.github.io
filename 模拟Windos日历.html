<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    *{
      margin: 0;
      padding: 0;
    }

    li{
      list-style:none;
      float: left;
      width: 30px;
      height: 30px;
      text-align: center;
      line-height: 30px;
    }

    #date{
      width: 406px;
      margin: 0 auto;
      overflow: hidden;
      padding: 25px 30px;
      background: #555450;
    }

    .time1{
      height: 64px;
      font:43px/64px "微软雅黑";
      color: #fff;
    }
    .time2{
      height: 38px;
      font: 18px/38px "微软雅黑";
      color: #429ce3;
    }
    .time3{
      height: 53px;
      color: #dddddc;
      margin: 15px 0;
      font: 25px/53px "微软雅黑";
    }
    .time3 strong{
      float: left;
      font-weight: normal;
    }
    .time3 div{
      float: right;
    }
    .time3 div span{
      font-size: 45px;
      cursor:pointer;
      margin: 0 10px;
    }
    #date ul{
      font-size: 0;
    }
    .number{
      font-size: 0;
    }
    #date ul li,
    .number span{
      width: 58px;
      height: 51px;
      font:22px/51px "微软雅黑";
      color: #fff;
      text-align: center;
      display: inline-block;
    }
    .number span.color{
      color: #8f8c89;
    }
    .number span.active{
      background: #0078d7;
    }
  </style>
</head>
<body>
  <!-- 总框架 -->
  <div id="date">
    <!-- 即时时间 -->
    <div class="time1">21:06:07</div>
    <!-- 即时日期 -->
    <div class="time2">2021年5月1日，星期四</div>
    <div class="time3">
      <!-- 跟随箭头变动的时间 -->
      <strong>2021年5月</strong>
      <!-- 箭头 -->
      <div><span>∧</span><span>∨</span></div>
    </div>
    <!-- 星期几，横向排列 -->
    <ul>
      <li>一</li>
      <li>二</li>
      <li>三</li>
      <li>四</li>
      <li>五</li>
      <li>六</li>
      <li>日</li>
    </ul>
    <!-- 日历 -->
    <div class="number">

    </div>
  </div>

  <script>
var time1=document.querySelector(".time1");//即时时间
var time2=document.querySelector(".time2");//即时日期
var strong=document.querySelector(".time3 strong");//跟箭头变换的日期
var btns=document.querySelectorAll(".time3 span");//箭头
var number=document.querySelector(".number");//日历
//即时时间
function time(){
  var d=new Date();
  time1.innerHTML=format(d.getHours())+":"+format(d.getMinutes())+":"+format(d.getSeconds());
}
//设置发生的时间，以毫秒为单位，1000毫秒为1秒
setInterval(time,1000);
//格式化时间，少于10就加个0，好看
function format(v){
  return v<10?"0"+v:v;
}
//即时日期
var d1=new Date();
time2.innerHTML=d1.getFullYear()+"年"+(d1.getMonth()+1)+"月"+d1.getDate()+"日，星期"+formatWeek(d1.getDay());
//格式化日期
function formatWeek(v){
  return ["日","一","二","三","四","五","六"][v];
}

//获取某个月的最后一天是几号(是几月就传几月)
function getEndDay(year,month){
  return new Date(year,month,0).getDate();
}
//获取某个月的第一天是星期几(是几月就传几月)
function getFirstWeek(year,month){
  return new Date(year,month,1).getDay();
}
//生成日历中的42天
var d=new Date();
setDate(d);
//日历生成函数
function setDate(d){
  var lastEndDay=getEndDay(d.getFullYear(),d.getMonth());//上个月的最后一天
  var curEndDay=getEndDay(d.getFullYear(),d.getMonth()+1);//当前月的最后一天
  var week=getFirstWeek(d.getFullYear(),d.getMonth());//当前月的第一天是周几
  var curDay=1;//下个月的起始点
  var str="";//日历
  var lastNum=week-1;//上个月要占的格子数量
  if(lastNum<0){
    //如果这个条件成立，说明这个月的第一天是周日，周日的话lastNum是负数
    lastNum=6;
  }
  for(var i=0;i<42;i++){
    if(i<lastNum){
      //这个条件成立说明放的是上个月的日期
      //在str前加
      str='<span class="color">'+(lastEndDay--)+"</span>"+str;
    }
    else if(i>=lastNum+curEndDay){//上个月的长度加这个月的总长度
      //这个条件成立说明放的是下个月的日期
      str+="<span class='color'>"+(curDay++)+"</span>";
    }
    else{
      //当前月的
      var c1=i-lastNum+1;
      // 判断当天是否属于系统时间的一天
      if(d.getFullYear()==new Date().getFullYear()&&d.getMonth()==new Date().getMonth()){
        if(c1==new Date().getDate())
            c1="active";
      else c1=""
      //就算当天等于系统时间的今天，不属于同年同月也不行
      }
      console.log(i-lastNum+1,c1);
      str+="<span class='"+c1+"'>"+(i-lastNum+1)+"</span>";
    }
  }
  number.innerHTML=str;
  strong.innerHTML=d.getFullYear()+"年"+(d.getMonth()+1)+"月";
}
//点击上个月
btns[0].onclick=function(){
  d.setMonth(d.getMonth()-1);
  setDate(d);
}
//点击下个月
btns[1].onclick=function(){
  d.setMonth(d.getMonth()+1);
  setDate(d);
}
  </script>
</body>
</html>